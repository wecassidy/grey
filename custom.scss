/*
Grey
In lieu of a better name.
By AoPS user Tungsten

This theme was inspired by NeoMathematicalKid's Fresh, PythonNut's Libre, and asf's Wordpress Dusk to
Dawn. Thanks to NeoMathematicalKid, PythonNut, knittingfrenzy18, asf, and the folks at MDN for helping me to learn CSS.

This code is released under the GNU GPLv3 license. The full legal text of the license is available at https://www.gnu.org/copyleft/gpl.html .

Compatibility stuffs (OUT OF DATE):
Perfect:
Firefox 27
Chrome 30
Opera 17

Poor:
Safari 6 (positioning seems to work differently than in FF, Chrome, and Opera)
Mobile Safari
Mobile Chrome (hey hey cool it crashes Chrome on my iPad)
*/

// TODO Update compatibility table
// TODO Style the postform more
// TODO Style blog search

// Variables stylesheet
@import "_variables.scss";

// Mixins stylesheet
@import "_mixins.scss";

// Animations
@import "animations.scss";

/* Universal Reset */
* {
	margin: 0;
	padding: 0;

	@include vendorize(box-sizing, border-box, $important: y);
}

/* Background */
html {
	min-height: 100%;
}

body {
	background-color: #fff;
	font-size: $fontSize;
	text-rendering: 0ptimizeLegibility;
}

/* Width stuff */
#wrapper {
	position: relative;
	top: -22px; /* Move #wrapper to the top of the window */
	width: 80%;
}

#main, #side {width: calc(100% - 10px);}
#content {background: transparent;}

/* Wrapper */
#wrapper {
	border: none;
	background: transparent;
}

/* Header */
#header {
	background: transparent;
	z-index: -1;
	border: none;
	border-bottom: 1px solid #999;
}

/* Navigation box */
#navigation_box {
	position: absolute;
	border: none;
	top: 50px;
	z-index: 1;
	left: 10%;
	width: 80%;
	background: transparent;
	color: transparent;
	padding: 0;

	@include vendorize(overflow-x, auto);
	a {
		color: $aColour;

		&:hover {
			color: $aHoverColour;
		}
	}
}

#right_navigation_box a::before {
	content: $gear; /* Gear */
	font-size: 17px;
	padding: 3px;
}

/* Post new entry link */
#post-new-entry-img {display: none;} /* Hide the pencil image */
#post-new-entry::before {
	content: $leftPen; /* Add a pen image */
	font-size: 32px;
}

// Entries
@import "entries.scss";

// Total-posts
@import "total-posts.scss";

/* Post form */
.fields1:first-child {
	margin: 0 !important;
	border-bottom: none;
}

#main {
	#message.inputbox {
		position: relative;
		left: -11px;
		top: 11px;
		width: calc(100% + 9px);
		
		border: 1px solid black;
		border-bottom: none;
	}

	/* Submit Buttons */
	.submit-buttons {
		border: none;    
		margin: 0;
		padding: 0;
		
		

		input {
			background: transparent;
			position: relative;
			border-width: 1px;
			border-color: #000;
			width: 50%;
			height: 20px;
			top: -2px;
			float: left;
			margin: 0 !important;
			
				
			
			@include vendorize(transition, 1s ease);
		

			&:hover {
				@include vendorize(border-radius, 0, $important: "y");
			}

			&:first-child {    
				@include vendorize(border-bottom-left-radius, 100px);
			}

			&:last-child {
				border-left: none;
				top: -18px;
				
				
				
				@include vendorize(border-bottom-right-radius, 100px);
			}
		}
	}
}

// Side
@import "side.scss";

// Icons
@import "icons.scss";

/* LaTeX and Asymptote */
/* Invert LaTeX colours in #side. Based on code by PythonNut */
/* Firefox */
#side img.latex:-moz-any(*,*),
#side img.latexcenter:not([src*="asyforum"]):-moz-any(*,*) {
	filter: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='-1 0 0 0 1   -1 0 0 0 1   -1 0 0 0 1 0 0 0 1 0'/></filter></svg>#grayscale") !important;
}

/* Safari 3+, Chrome 1+ */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
	img.latex, img.latexcenter {
		-webkit-filter: invert(88%) !important;
		background: none;
		padding: 0;
	}

	#side img.latex, #side img.latexcenter:not([src*="asyforum"]) {
		filter: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='-1 0 0 0 1   -1 0 0 0 1   -1 0 0 0 1 0 0 0 1 0'/></filter></svg>#grayscale") !important;
	}
}


/* Links */
a:link, a:visited {
	color: $aColour;
	
	@include vendorize(transition, color 0.5s ease);
}

a:link:hover, a:visited:hover {
	color: $aHoverColour;
}

/* Usernames */
a[href*="mode=viewprofile"] {
	display: inline-block;
	
	@include vendorize(transform, skew(-10deg));
			
	@include vendorize(transition, all 0.5s ease);
}

a[href*="mode=viewprofile"]:hover {
	@include vendorize(transform, none);
}

/* Email addresses */
a[href^="mailto:"]::after {
	content: $envelope; /* Add an envelope after the email address */
	font-size: 20px;
	padding: 3px;
}

// BBCode
@import "bbcode.scss";

/* Image size limiter */
.entrywrap img, #side img {
	position: relative;
	max-width: 100%;
}

/* Highlighting */
*::-moz-selection {
	background-color: $selectColour;
}

*::selection {
	background-color: $selectColour;
}

#side > div::-moz-selection {
	background: $sideSelectColour;
}

#side > div::selection {
	background: $sideSelectColour;
}

/* Mobile style */
@-webkit-viewport{width: device-width;}
   @-moz-viewport{width: device-width;}
	@-ms-viewport{width: device-width;}
	 @-o-viewport{width: device-width;}
		@viewport{width: device-width;}

/* Mobile Devices */
@media only screen and (max-width: 800px), only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (min-resolution: 132dpi), only screen and (min-resolution: 1.5dppx), only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (min-resolution: 132dpi) {

	#{$iconParent} {
		display: none;
	}

	.widget[id], #user-menu-widget {
		margin: 3px 3px 3px 3px;
		position: relative;
		max-height: 3em;

		@include vendorize(transition, max-height 1s ease);
	}

	.widget[id]:hover, #user-menu-widget:hover {
		max-height: 50em;
	}

}

/* Sillyness */
@media all {
	@media (max-width: 319px) {

		body > div {display: none;}

		body::before {
			@include catmsg;
		}
	}

	@media (max-width: 200px) {

		body > div {display: none;}

		body::before {
			@include catmsg;

			content: "U HAS VRY VRY SMALL SCREEN!";
			font-size: 40px;
		}
	}

	@media (max-width: 100px) {
		body > div {display: none;}

		body::before {
			content: "";
			background-image: url(http://tungsten.site40.net/css/CatSurprised.jpg);
			background-size: 100% AUTO;
			font-size: 50px;
			color: white;
			position: fixed;
			width: 100%;
			height: 100%;
			left: 0;
		}

		body::after {
			left: -300%;
			top: 50%;
			width: 700%;

			@include catmsg;
			@include vendorize(transform, rotate(90deg));

			filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); /* Ugh IE */
		}
	}
}

/* Personal stuff */
#post-new-entry::after {content: " of Entriness";}

#explain:not(:empty)::before {
	content: "7258425873687582878583873678578252783836872587"; /* Tee hee hee... */
}

#main textarea#message.inputbox {
	min-height: 50em;
}